/*! ngStorage 0.3.0 | Copyright (c) 2014 Gias Kay Lee | MIT License */"use strict";!function(){function a(a){return["$rootScope","$window","$log",function(b,c,d){function e(a){var b=c[a];if(b&&"localStorage"===a){var d="__"+Math.round(1e7*Math.random());try{localStorage.setItem(d,d),localStorage.removeItem(d)}catch(e){b=!1}}return b}for(var f,g,h,i=e(a)||(d.warn("This browser does not support Web Storage!"),{setItem:function(){},getItem:function(){}}),j={$default:function(a){for(var b in a)angular.isDefined(j[b])||(j[b]=a[b]);return j},$reset:function(a){for(var b in j)"$"===b[0]||delete j[b];return j.$default(a)}},k=0;k<i.length;k++)(h=i.key(k))&&"ngStorage-"===h.slice(0,10)&&(j[h.slice(10)]=angular.fromJson(i.getItem(h)));return f=angular.copy(j),b.$watch(function(){g||(g=setTimeout(function(){if(g=null,!angular.equals(j,f)){angular.forEach(j,function(a,b){angular.isDefined(a)&&"$"!==b[0]&&i.setItem("ngStorage-"+b,angular.toJson(a)),delete f[b]});for(var a in f)i.removeItem("ngStorage-"+a);f=angular.copy(j)}},100))}),"localStorage"===a&&c.addEventListener&&c.addEventListener("storage",function(a){"ngStorage-"===a.key.slice(0,10)&&(a.newValue?j[a.key.slice(10)]=angular.fromJson(a.newValue):delete j[a.key.slice(10)],f=angular.copy(j),b.$apply())}),j}]}angular.module("ngStorage",[]).factory("$localStorage",a("localStorage")).factory("$sessionStorage",a("sessionStorage"))}();